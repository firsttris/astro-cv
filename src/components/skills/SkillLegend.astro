---
import styled from "@emotion/styled";
import { Typography } from "../Typography";
import { getLangFromUrl, useTranslations } from "../../i18n/utils";

// Same color scheme as in ChipsWithIcon.astro
const getBorderForLevel = (level: string) => {
  switch(level) {
    case "Expert": return "2px solid #ffaa00"; // Gold/Orange
    case "Intermediate": return "1.5px solid #74adff"; // Blue
    case "Beginner": return "1px solid #c2c2c2"; // Gray
    default: return "1px solid grey";
  }
};

const LegendContainer = styled.div({
  display: "flex",
  gap: "20px",
  marginTop: "20px",
  paddingTop: "12px",
  borderTop: "1px solid #e2e8f0",
  justifyContent: "flex-end",
});

const LegendItem = styled.div({
  display: "flex",
  alignItems: "center",
  gap: "6px",
});

const LevelBadge = styled.div<{level: string}>((props) => ({
  fontSize: "9px",
  fontWeight: 600,
  backgroundColor: "white",
  color: "#475569",
  borderRadius: "50%",
  width: "16px",
  height: "16px",
  display: "flex",
  alignItems: "center",
  justifyContent: "center",
  border: getBorderForLevel(props.level),
}));

const t = useTranslations(Astro.url.pathname);
const currentLanguage = getLangFromUrl(Astro.url.pathname);
const isGerman = currentLanguage === "de";
---

<LegendContainer>
  <LegendItem>
    <LevelBadge level="Expert">E</LevelBadge>
    <Typography className="caption">{t("expert")}</Typography>
  </LegendItem>
  <LegendItem>
    <LevelBadge level="Intermediate">{isGerman ? 'F' : 'I'}</LevelBadge>
    <Typography className="caption">{t("intermediate")}</Typography>
  </LegendItem>
  <LegendItem>
    <LevelBadge level="Beginner">{isGerman ? 'A' : 'B'}</LevelBadge>
    <Typography className="caption">{t("beginner")}</Typography>
  </LegendItem>
</LegendContainer>